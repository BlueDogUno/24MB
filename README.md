# 20240516

宁工NewLegends战队工程2324赛季电控_youg

此代码适用于宁波工程学院24赛季工程机器人油墨小兵mcu

# **24赛季**

## 版本说明

还是老架构

## 版本问题 （后面[]为对应修改版本）

暂无

## 电机命名

terminal 

    roll    can2_1
    pitch   can2_2

wrist 


    DM_roll     can1_1
    DM_pitch    can1_2
    DM_yaw      can1_3

elbow 

    x_stretch *2    can2_3&4
    y_slid          can2_5
    z_lift *2       can2_6&7

fuction

    posture     can2_8 死了




# 天才操作方式

## 遥控器控制 左摇杆上下控制臂的运动
*左拨杆向上，自右向左的终端姿态变化*
------------------------------------------------------------------------------
左拨杆  | 右拨杆 | 摇杆         | 功能            | En            | CAN_ID      | 模块
------ | ------ | ----------- | --------------- | ------------- | -------------  |  -------------
上     | 上    |   左上下     | DM_yaw轴            | DM_yaw          | can1_1      | 云台
上     | 中    |   左上下     | DM_pitch轴          | DM_pitch        | can1_2      | 云台
上     | 下    |   左上下     | DM_roll轴           | DM_roll         | can1_3      | 云台

*左拨杆向中，功能性配置的状态切换*
------------------------------------------------------------------------------
左拨杆 | 右拨杆 | 摇杆         | 功能            | En             | CAN_ID        | 模块
------ | ------ | ----------- | --------------- | -------------- | -----------  |  ----------
中     | 上    |   左上下     | roll            | roll            | can2_1      | 云台
中     | 中    |   左上下     | pitch           | pitch           | can2_2      | 云台
中     | 下    |   左上下     | 转矿            | posture          | can2_8      | 云台

*左拨杆向下，xzy的肘部位置变化*
----------------------------------------------------------------------------------------
左拨杆 | 右拨杆 | 摇杆         | 功能            | En           | CAN_ID        | 模块
----- | ------ | ----------- | --------------- | ------------ | --------------  |  -------
下     | 上    |   左上下     | 出爪x            | stretch      | can2_3&4      | 云台
下     | 中    |   左上下     | 抬升z            | lift         | can2_6&7      | 云台
下     | 下    |   左上下     | 横移y            | slid         | can2_5      | 云台

*其他功能*
-----------------------------------------------------------------------------
左拨杆 | 右拨杆 | 摇杆         | 功能            | En           | CAN_ID
----  | ------ | ----------- | --------------- | ------------ | -------------
上     | 无    |   拨轮下       |电磁阀开关         | non          | non
中     | 无    |   拨轮下       |气泵开关         | non          | non
下     | 无    |   拨轮下       |全断电         | non          | non

## 键鼠


键盘    |   鼠标     |   功能
------  | --------  | --------
F       | 滚轮      | 救援
G       |           | 地矿
B       | 滚轮      | 出卡
Z       |           | 自动取矿
X       |           | 自动收矿
C       |           | 自动出矿
V       |           | 自动兑换
------------------------------------------------------------------


    手动自动        功能            按键（应是长按时开启模式）

    手动            救援出回            （暂时闲置）
    手动            吸盘开关            shift + f（开）/g（关）//待测试
    手动            图传yaw旋转         shift + q/e     
    手动            图传pitch          ctrl + q/e（归到中档可能需要多试几次）    

    自动            归位                   z  
    自动            小资源岛取矿抬升        x  
    自动            小资源岛取矿前爪        v
    自动            小资源岛抬矿            c


    自动            大资源岛                space
    自动            兑矿基础位              r         

## 气路设计

    24 唯一的设计就是气泵和一个电磁阀，没了。还是得要两个继电器
    md

## 代码结构简介
arm_ctrl 

algorithm 中的 matrix robotic utils 均为从上交开源直接嫖的
    希望未来能用上


# **23赛季内容**

## 代码结构简介
22赛季将代码结构重置，大体结构和英雄步兵等保持一致
大部分编写代码在user_code中
module文件包含绝大部分的控制和解算

    auto    并未调试完成使用的自动程序代码，每节完成需要向上板发送指令确定进行下一步（由于同时进行机械结构会冲突，有可能击杀自己）

    chassis     底盘控制解算

    communicate    本赛季新加的底盘上板之间的板间通讯（之前是使用遥控器数据线一分为二的方式同时控制两块板）

    config  部分重要参数放置位置

    lift    为了减轻上板使用电机过多导致通道拥挤将抬升放在底盘控制，以及一个吸盘控制

application文件夹为freertos使用服务
algorithm放置算法

    first_order_filter  一节低通滤波，如用
    pid     不作过多描述



## 底盘构成

底盘电机：can2  ID 为1 2 3 4 右前，左前，左后，右后
    
    ///////
    2     1
    3     4   
    ///////
